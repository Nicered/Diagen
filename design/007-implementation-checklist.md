# Diagen 구현 체크리스트

## 개요

이 문서는 Diagen 프로젝트의 구현 진행 상황을 추적하기 위한 체크리스트입니다.

---

## Phase 1: MVP (다이어그램 기본 기능)

### 1.1 프로젝트 초기화

- [ ] pnpm workspace 설정
- [ ] TypeScript 설정 (tsconfig.json)
- [ ] Vite 프로젝트 생성
- [ ] ESLint + Prettier 설정
- [ ] 기본 폴더 구조 생성
  ```
  src/
  ├── parser/       # DSL 파서
  ├── core/         # 코어 모델
  ├── layout/       # 레이아웃 엔진
  ├── renderer/     # 렌더러
  ├── themes/       # 테마
  ├── export/       # 출력 모듈
  └── types/        # 타입 정의
  ```

### 1.2 타입 시스템

- [ ] 기본 타입 정의 (`src/types/`)
  - [ ] `Node` 타입
  - [ ] `Edge` 타입
  - [ ] `Group` 타입
  - [ ] `Port` 타입
  - [ ] `Style` 타입 (NodeStyle, EdgeStyle)
  - [ ] `Theme` 타입
- [ ] JSON IR 타입 정의
  - [ ] `DiagramIR` 타입
  - [ ] `InfographicIR` 타입
  - [ ] `PageIR` 타입

### 1.3 DSL 파서

- [ ] Chevrotain 설치 및 설정
- [ ] 렉서 (Lexer) 구현
  - [ ] 토큰 정의 (키워드, 리터럴, 연산자, 구분자)
  - [ ] 문자열 이스케이프 처리
  - [ ] 주석 처리
- [ ] 파서 (Parser) 구현
  - [ ] 문서 헤더 파싱 (`@diagram`, `@infographic`, `@page`)
  - [ ] 메타데이터 블록 파싱 (`---` ... `---`)
  - [ ] 노드 정의 파싱
  - [ ] 속성 블록 파싱 (`[...]`)
  - [ ] 엣지 파싱 (`->`, `-->`, `==>` 등)
  - [ ] 다중 연결 파싱 (`(A, B) -> C`)
  - [ ] 그룹 파싱 (`group { }`)
  - [ ] 포트 참조 파싱 (`node:port`)
  - [ ] 그룹 참조 파싱 (`Group.node`)
- [ ] AST → JSON IR 변환기
- [ ] 에러 핸들링 및 에러 메시지
- [ ] 파서 테스트 케이스 작성

### 1.4 코어 모델

- [ ] 다이어그램 모델 클래스
  - [ ] `DiagramModel` 클래스
  - [ ] 노드 관리 (추가, 삭제, 조회)
  - [ ] 엣지 관리
  - [ ] 그룹 관리
- [ ] 유효성 검사
  - [ ] ID 중복 검사
  - [ ] 참조 유효성 검사 (존재하지 않는 노드 참조)
  - [ ] 필수 속성 검사

### 1.5 레이아웃 엔진

- [ ] ELK.js 설치 및 설정
- [ ] ELK 어댑터 구현
  - [ ] DiagramModel → ELK 그래프 변환
  - [ ] ELK 레이아웃 옵션 매핑
  - [ ] 레이아웃 결과 → DiagramModel 적용
- [ ] 레이아웃 알고리즘 지원
  - [ ] `layered` (기본값)
  - [ ] `force`
  - [ ] `stress`
  - [ ] `mrtree`
  - [ ] `radial`
- [ ] 레이아웃 옵션 설정
  - [ ] 방향 (TB, BT, LR, RL)
  - [ ] 노드 간격
  - [ ] 엣지 라우팅 (직교, 폴리라인)

### 1.6 렌더러 (React Flow)

- [ ] React Flow 설치 및 설정
- [ ] 커스텀 노드 컴포넌트
  - [ ] `RectNode` (기본 사각형)
  - [ ] `CircleNode`
  - [ ] `DiamondNode`
  - [ ] `HexagonNode`
  - [ ] `CylinderNode`
  - [ ] `CloudNode`
  - [ ] `PersonNode`
- [ ] 커스텀 엣지 컴포넌트
  - [ ] 실선 엣지
  - [ ] 점선 엣지
  - [ ] 굵은 엣지
  - [ ] 양방향 엣지
  - [ ] 엣지 라벨
- [ ] 그룹 렌더링
- [ ] 포트 렌더링
- [ ] 스타일 적용
  - [ ] fill, stroke, strokeWidth
  - [ ] 그라디언트
  - [ ] 그림자
  - [ ] 투명도

### 1.7 SVG 출력

- [ ] React Flow → SVG 변환
- [ ] SVG 최적화 (불필요한 요소 제거)
- [ ] 파일 저장 기능

### 1.8 기본 테마

- [ ] `professional` 테마
- [ ] `modern` 테마
- [ ] `minimal` 테마
- [ ] 테마 적용 시스템

---

## Phase 2: 인포그래픽 & 확장

### 2.1 인포그래픽 파서 확장

- [ ] KPI 카드 파싱 (`item`)
- [ ] 차트 파싱 (`data`, `series`)
- [ ] 타임라인 파싱 (`point`)
- [ ] 프로세스 파싱 (`step`)
- [ ] 퍼널 파싱 (`stage`)
- [ ] 피라미드 파싱 (`level`)
- [ ] 매트릭스 파싱 (`cell`)
- [ ] 동심원 파싱 (`ring`)
- [ ] 스택 파싱 (`layer`)
- [ ] 사이클 파싱 (`phase`)
- [ ] 조직도 파싱 (`member`)

### 2.2 인포그래픽 렌더러 (Visx)

- [ ] Visx 설치 및 설정
- [ ] KPI 카드 컴포넌트
  - [ ] 값 표시
  - [ ] 트렌드 표시 (화살표, 색상)
  - [ ] 아이콘 통합
- [ ] 차트 컴포넌트
  - [ ] 막대 차트 (Bar)
  - [ ] 라인 차트 (Line)
  - [ ] 영역 차트 (Area)
  - [ ] 파이 차트 (Pie)
  - [ ] 도넛 차트 (Donut)
- [ ] 타임라인 컴포넌트
  - [ ] 수평/수직 방향
  - [ ] 상태별 스타일 (completed, current, upcoming)
- [ ] 프로세스 컴포넌트
  - [ ] 번호 스타일
  - [ ] 아이콘 스타일
  - [ ] 연결선
- [ ] 퍼널 컴포넌트
  - [ ] 단계별 크기 계산
  - [ ] 비율 표시
- [ ] 피라미드 컴포넌트
  - [ ] 계층 렌더링
  - [ ] 방향 (up/down)
- [ ] 매트릭스 (2x2) 컴포넌트
  - [ ] 축 레이블
  - [ ] 셀 렌더링
- [ ] 동심원 컴포넌트
  - [ ] 원형 렌더링
  - [ ] 레이블 배치
- [ ] 스택 컴포넌트
  - [ ] 레이어 쌓기
  - [ ] 3D 스타일 옵션
- [ ] 사이클 컴포넌트
  - [ ] 원형 배치
  - [ ] 화살표 연결
  - [ ] 중앙 텍스트
- [ ] 조직도 컴포넌트
  - [ ] 트리 레이아웃
  - [ ] 연결선

### 2.3 기술 특화 DSL

- [ ] C4 다이어그램
  - [ ] `actor`, `system`, `container`, `component` 파싱
  - [ ] C4 전용 스타일
  - [ ] 서브타입별 렌더링 (context, container, component)
- [ ] 데이터 파이프라인
  - [ ] `source`, `transform`, `sink` 파싱
  - [ ] 파이프라인 전용 레이아웃
- [ ] 신경망 아키텍처
  - [ ] `nlayer` 파싱
  - [ ] `autoconnect` 기능
  - [ ] 레이어 시각화
- [ ] 클라우드 아키텍처
  - [ ] `region`, `vpc`, `subnet`, `resource` 파싱
  - [ ] AWS/GCP/Azure 아이콘 통합
  - [ ] 중첩 구조 렌더링

### 2.4 복합 페이지

- [ ] `@page` 파싱
- [ ] 그리드 시스템 구현
- [ ] `place` 블록 처리
- [ ] 중첩 문서 렌더링
- [ ] 페이지 전체 렌더링

### 2.5 PNG 출력

- [ ] html-to-image 통합
- [ ] 해상도 옵션 (@1x, @2x, @3x)
- [ ] 배경색 옵션

### 2.6 PDF 출력

- [ ] jsPDF 통합
- [ ] SVG → PDF 변환
- [ ] 페이지 크기 옵션

### 2.7 추가 테마

- [ ] `colorful` 테마
- [ ] `dark` 테마
- [ ] 커스텀 테마 지원

### 2.8 아이콘 시스템

- [ ] 아이콘 라이브러리 통합 (Lucide, Heroicons 등)
- [ ] 아이콘 검색/사용 API
- [ ] 커스텀 아이콘 지원

---

## Phase 3: 도구 & 생태계

### 3.1 CLI 도구

- [ ] CLI 프로젝트 설정
- [ ] 명령어 구현
  - [ ] `diagen build <input> -o <output>` - 파일 빌드
  - [ ] `diagen watch <input>` - 파일 감시 모드
  - [ ] `diagen preview <input>` - 미리보기 서버
  - [ ] `diagen init` - 프로젝트 초기화
  - [ ] `diagen validate <input>` - 문법 검사
- [ ] 설정 파일 지원 (`diagen.config.js`)
- [ ] 배치 처리 (여러 파일 한번에)

### 3.2 VS Code 확장

- [ ] 확장 프로젝트 설정
- [ ] 문법 하이라이팅
  - [ ] TextMate 문법 정의
  - [ ] 키워드, 문자열, 주석 색상
- [ ] 자동완성
  - [ ] 키워드 자동완성
  - [ ] 속성 자동완성
  - [ ] 노드 ID 자동완성
- [ ] 문법 검사 (린터)
  - [ ] 실시간 에러 표시
  - [ ] Quick Fix 제안
- [ ] 실시간 미리보기
  - [ ] 사이드 패널 미리보기
  - [ ] 자동 새로고침
- [ ] 코드 조각 (Snippets)
  - [ ] 다이어그램 템플릿
  - [ ] 인포그래픽 템플릿
- [ ] 포매터
  - [ ] 자동 들여쓰기
  - [ ] 정렬

### 3.3 웹 플레이그라운드

- [ ] 웹 에디터 UI
- [ ] 실시간 렌더링
- [ ] 예제 갤러리
- [ ] 공유 기능 (URL 공유)
- [ ] 내보내기 버튼 (SVG, PNG, PDF)

### 3.4 문서화

- [ ] API 문서
- [ ] DSL 레퍼런스
- [ ] 튜토리얼
  - [ ] 시작하기
  - [ ] 다이어그램 기초
  - [ ] 인포그래픽 기초
  - [ ] 고급 기능
- [ ] 예제 모음
- [ ] 마이그레이션 가이드 (Mermaid, PlantUML에서)

### 3.5 테스트

- [ ] 단위 테스트
  - [ ] 파서 테스트
  - [ ] 모델 테스트
  - [ ] 레이아웃 테스트
- [ ] 통합 테스트
  - [ ] E2E 렌더링 테스트
  - [ ] 출력 포맷 테스트
- [ ] 시각적 회귀 테스트
  - [ ] 스냅샷 테스트
  - [ ] 이미지 비교

### 3.6 성능 최적화

- [ ] 파서 최적화
- [ ] 레이아웃 캐싱
- [ ] 렌더링 최적화 (가상화, 지연 로딩)
- [ ] 번들 사이즈 최적화

### 3.7 배포

- [ ] npm 패키지 배포
  - [ ] `@diagen/core` - 코어 라이브러리
  - [ ] `@diagen/parser` - 파서
  - [ ] `@diagen/react` - React 컴포넌트
  - [ ] `@diagen/cli` - CLI 도구
- [ ] VS Code 마켓플레이스 배포
- [ ] 웹 플레이그라운드 호스팅

---

## 진행 상황 요약

| Phase | 진행률 | 상태 |
|-------|--------|------|
| Phase 1: MVP | 0% | 🔴 시작 전 |
| Phase 2: 인포그래픽 | 0% | 🔴 시작 전 |
| Phase 3: 도구 | 0% | 🔴 시작 전 |

---

## 변경 이력

| 날짜 | 내용 |
|------|------|
| 2025-12-01 | 초기 체크리스트 작성 |
